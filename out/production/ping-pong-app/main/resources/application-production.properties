# Production configuration for Java Ping Pong Elo
# This profile is used when SPRING_PROFILES_ACTIVE=production

# Database configuration
spring.datasource.url=${SPRING_DATASOURCE_URL:jdbc:postgresql://localhost:5432/pingpongdb}
spring.datasource.username=${SPRING_DATASOURCE_USERNAME:postgres}
spring.datasource.password=${SPRING_DATASOURCE_PASSWORD:password}
spring.datasource.driver-class-name=org.postgresql.Driver
spring.jpa.database-platform=org.hibernate.dialect.PostgreSQLDialect

# Production database settings
spring.jpa.hibernate.ddl-auto=${SPRING_JPA_HIBERNATE_DDL_AUTO:validate}
spring.jpa.show-sql=${SPRING_JPA_SHOW_SQL:false}
spring.jpa.properties.hibernate.format_sql=false

# Optimized connection pool for production
spring.datasource.hikari.maximum-pool-size=${HIKARI_MAX_POOL_SIZE:20}
spring.datasource.hikari.minimum-idle=${HIKARI_MIN_IDLE:5}
spring.datasource.hikari.idle-timeout=${HIKARI_IDLE_TIMEOUT:600000}
spring.datasource.hikari.connection-timeout=${HIKARI_CONNECTION_TIMEOUT:30000}
spring.datasource.hikari.max-lifetime=${HIKARI_MAX_LIFETIME:1800000}

# JWT Configuration
app.jwt.secret=${JWT_SECRET}
app.jwt.expiration=${JWT_EXPIRATION:86400000}

# Email Configuration
spring.mail.host=${MAIL_HOST:smtp.gmail.com}
spring.mail.port=${MAIL_PORT:587}
spring.mail.username=${MAIL_USERNAME:ping.pong.elo.rocket@gmail.com}
spring.mail.password=${MAIL_PASSWORD:dwob lgmk qslr jhyf}
spring.mail.properties.mail.smtp.auth=true
spring.mail.properties.mail.smtp.starttls.enable=true
spring.mail.properties.mail.smtp.starttls.required=true
spring.mail.properties.mail.smtp.ssl.trust=smtp.gmail.com
spring.mail.properties.mail.smtp.ssl.protocols=TLSv1.2
spring.mail.properties.mail.smtp.connectiontimeout=5000
spring.mail.properties.mail.smtp.timeout=3000
spring.mail.properties.mail.smtp.writetimeout=5000

# Application Config
app.email.from=${APP_EMAIL_FROM:noreply@pingpongelo.com}
app.baseUrl=${APP_BASE_URL:https://pingpongelo.com}
app.reset-token.expiry-minutes=${APP_RESET_TOKEN_EXPIRY_MINUTES:30}

# Domain restriction configuration
app.registration.domain-restriction-enabled=${APP_REGISTRATION_DOMAIN_RESTRICTION_ENABLED:true}
app.registration.allowed-domains=${APP_REGISTRATION_ALLOWED_DOMAINS:rocketpartners.io}
app.registration.invitation-code-expiry-days=${APP_REGISTRATION_INVITATION_CODE_EXPIRY_DAYS:30}
app.registration.require-email-verification=${APP_REGISTRATION_REQUIRE_EMAIL_VERIFICATION:true}

# Email verification
app.email-verification.token-expiry-hours=${APP_EMAIL_VERIFICATION_TOKEN_EXPIRY_HOURS:24}

# Elo curve configuration
elo.curve.enabled=${ELO_CURVE_ENABLED:true}
elo.curve.upper-threshold=${ELO_CURVE_UPPER_THRESHOLD:1600}
elo.curve.lower-threshold=${ELO_CURVE_LOWER_THRESHOLD:800}
elo.curve.gain-boost-factor=${ELO_CURVE_GAIN_BOOST_FACTOR:1.2}
elo.curve.loss-reduction-factor=${ELO_CURVE_LOSS_REDUCTION_FACTOR:0.8}

# Production logging configuration
logging.level.root=${LOGGING_LEVEL_ROOT:INFO}
logging.level.com.example.javapingpongelo=${LOGGING_LEVEL_COM_EXAMPLE_JAVAPINGPONGELO:INFO}
logging.level.org.springframework.security=${LOGGING_LEVEL_SECURITY:WARN}
logging.level.org.hibernate=${LOGGING_LEVEL_HIBERNATE:WARN}
logging.level.org.springframework.web=${LOGGING_LEVEL_WEB:WARN}

# Production logging pattern and file configuration
logging.pattern.console=%d{yyyy-MM-dd HH:mm:ss} [%thread] %-5level %logger{36} - %msg%n
logging.file.name=${LOGGING_FILE_NAME:logs/application.log}
logging.logback.rollingpolicy.max-file-size=${LOGGING_MAX_FILE_SIZE:50MB}
logging.logback.rollingpolicy.max-history=${LOGGING_MAX_HISTORY:30}
logging.logback.rollingpolicy.total-size-cap=${LOGGING_TOTAL_SIZE_CAP:1GB}

# Security settings
server.error.include-message=never
server.error.include-binding-errors=never
server.error.include-stacktrace=never
server.error.include-exception=false

# Actuator configuration for production
management.endpoints.web.exposure.include=health,info,metrics
management.endpoints.web.base-path=/api/actuator
management.endpoint.health.show-details=when-authorized
management.endpoint.health.show-components=when-authorized

# Disable H2 console in production
spring.h2.console.enabled=false

# Cache configuration
spring.cache.type=caffeine
spring.cache.caffeine.spec=maximumSize=1000,expireAfterWrite=30m